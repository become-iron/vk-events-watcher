(function(e){function t(t){for(var r,i,c=t[0],o=t[1],u=t[2],v=0,p=[];v<c.length;v++)i=c[v],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,c=1;c<n.length;c++){var o=n[c];0!==a[o]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},s=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/vk-events-watcher/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=o;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"15c6":function(e,t,n){},2338:function(e,t,n){"use strict";var r=n("7695"),a=n.n(r);a.a},3160:function(e,t,n){},"347e":function(e,t,n){"use strict";var r=n("15c6"),a=n.n(r);a.a},"36e5":function(e,t,n){"use strict";var r=n("c04c"),a=n.n(r);a.a},"49f8":function(e,t,n){var r={"./ru.json":"7704"};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=s,e.exports=a,a.id="49f8"},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=n("5530"),s=n("2f62"),i=n("7ffd");i["b"].options.mapping="simple",i["b"].options.mapping=function(e,t,n){switch(e){case"mutations":case"actions":return n.camel("set",t)}return t};var c=i["b"],o=(n("dca8"),Object.freeze({groups:"groups",users:"users",settings:"settings"}));function u(){return{userID:null,token:null}}var l,v,p=u(),d={namespaced:!0,state:p,mutations:Object(a["a"])({},i["d"].mutations(p))},f=(n("99af"),n("4de4"),n("0481"),n("a15b"),n("d81d"),n("13d5"),n("fb6a"),n("4069"),n("d3b7"),n("07ac"),n("3ca3"),n("ddb0"),n("2909")),m=n("3835"),h=(n("96cf"),n("1da1")),b=n("9e86"),w=n.n(b),g=n("ade3"),y=Object.freeze({group:"group",user:"user"}),x=Object.freeze((l={},Object(g["a"])(l,o.groups,y.group),Object(g["a"])(l,o.users,y.user),l)),O={appCodeName:"vkEventsWatcher",vkAPIVersion:"5.103",appID:parseInt("7220149",10),requiredRights:["friends","groups"],groupsFields:["trending","verified"],usersFields:["first_name","last_name","nickname","maiden_name","screen_name","deactivated","relation","status","trending","verified","photo_50"],fieldsToCompare:(v={},Object(g["a"])(v,y.group,["name","screen_name","is_closed","trending","verified"]),Object(g["a"])(v,y.user,["first_name","last_name","nickname","maiden_name","screen_name","deactivated","relation","status","trending","verified"]),v),eventDateTitleFormat:"d LLLL y HH:mm"},E=(n("a4d3"),n("e01a"),n("d28b"),n("b64b"),n("4151")),_=n.n(E),j=Object.freeze({add:"add",remove:"remove",change:"change"}),T=n("d4ec"),k=n("c64e"),V=n.n(k),D=function e(t){var n=t.id,r=void 0===n?V()():n,a=t.entityID,s=t.entityType,i=t.entityData,c=t.eventType,o=t.eventDate,u=t.isNewEvent,l=t.eventData,v=void 0===l?null:l;Object(T["a"])(this,e),this.id=r,this.entityID=a,this.entityType=s,this.entityData=i,this.eventType=c,this.eventDate=o,this.isNewEvent=u,this.eventData=v},N=n("bfc7"),C=n.n(N),R=n("63ea"),S=n.n(R);function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n||(n=C()(Object.keys(e),Object.keys(e))),n.reduce((function(n,r){var a,s,i=null!==(a=e[r])&&void 0!==a?a:null,c=null!==(s=t[r])&&void 0!==s?s:null;return S()(i,c)||(n[r]=[i,c]),n}),{})}function $(e,t,n){var r,a=Date.now(),s=O.fieldsToCompare[e],i=_()(n,"id"),c=[],o=[],u=!0,l=!1,v=void 0;try{for(var p,d=t[Symbol.iterator]();!(u=(p=d.next()).done);u=!0){var f=p.value,m=f.id;if(m in i){var h=i[m],b=I(h,f,s);if(Object.keys(b).length){var w=new D({entityID:m,entityType:e,entityData:f,eventType:j.change,eventDate:a,isNewEvent:!0,eventData:b});o.push(w)}delete i[m]}else{var y=new D({entityID:m,entityType:e,entityData:f,eventType:j.add,eventDate:a,isNewEvent:!0});c.push(y)}}}catch(E){l=!0,v=E}finally{try{u||null==d.return||d.return()}finally{if(l)throw v}}var x=Object.values(i).map((function(t){var n=t.id;return new D({entityID:n,entityType:e,entityData:t,eventType:j.remove,eventDate:a,isNewEvent:!0})}));return r={},Object(g["a"])(r,j.add,c),Object(g["a"])(r,j.remove,x),Object(g["a"])(r,j.change,o),r}n("5db7"),n("73d9");var M=n("93c6"),W=n.n(M),L=n("ceac"),P=n.n(L),A=n("74ce"),z=(n("4160"),n("ac1f"),n("466d"),n("159b"),n("a925"));function K(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var r=n.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var a=r[1];t[a]=e(n)}})),t}r["a"].use(z["a"]);var F=new z["a"]({locale:"ru",fallbackLocale:"en",messages:K()});function q(e){return U.apply(this,arguments)}function U(){return U=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:null,e.next=3,r["a"].store.set("messageText",t);case 3:return e.next=5,r["a"].store.set("messageColor",n);case 5:return e.next=7,r["a"].store.set("showMessageText",!0);case 7:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function B(e){return H.apply(this,arguments)}function H(){return H=Object(h["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q(t,"success");case 2:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function J(e){return G.apply(this,arguments)}function G(){return G=Object(h["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q(t,"error");case 2:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=window.scrollY,n=document.documentElement.clientHeight,r=document.documentElement.scrollHeight,a=n+t+e>=r;return a||r<n}var Z,Q=Object.freeze({entities:"entities",events:"events"});function X(){Z=new A["a"](O.appCodeName);var e=P()(Object.keys(new D({})),["isNewEvent"]).join(","),t=Object.values(y).reduce((function(t,n){var r=ee(Q.entities,n);t[r]=["id",O.fieldsToCompare[n]].join(",");var a=ee(Q.events,n);return t[a]=e,t}),{});Z.version(1).stores(t)}function ee(e,t){var n=r["a"].store.get("auth/userID");return"".concat(e,":").concat(t,":").concat(n)}function te(e){return ne.apply(this,arguments)}function ne(){return ne=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=Z[t],e.abrupt("return",n.toArray());case 5:return e.prev=5,e.t0=e["catch"](0),e.next=9,J(F.t("errors.errorDuringWorkWithLongTermStore"));case 9:throw e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,5]])}))),ne.apply(this,arguments)}function re(e,t){return ae.apply(this,arguments)}function ae(){return ae=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=Z[t],e.next=4,r.clear();case 4:return e.next=6,r.bulkAdd(n);case 6:e.next=13;break;case 8:return e.prev=8,e.t0=e["catch"](0),e.next=12,J(F.t("errors.errorDuringWorkWithLongTermStore"));case 12:throw e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,8]])}))),ae.apply(this,arguments)}function se(e,t){return ie.apply(this,arguments)}function ie(){return ie=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=Z[t],e.next=4,r.bulkAdd(n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e["catch"](0),e.next=10,J(F.t("errors.errorDuringWorkWithLongTermStore"));case 10:throw e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,6]])}))),ie.apply(this,arguments)}function ce(e){return oe.apply(this,arguments)}function oe(){return oe=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=ee(Q.entities,t),e.abrupt("return",te(n));case 5:return e.prev=5,e.t0=e["catch"](0),e.next=9,J(F.t("errors.errorDuringWorkWithLongTermStore"));case 9:throw e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,5]])}))),oe.apply(this,arguments)}function ue(e,t){return le.apply(this,arguments)}function le(){return le=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=ee(Q.entities,t),e.next=4,re(r,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e["catch"](0),e.next=10,J(F.t("errors.errorDuringWorkWithLongTermStore"));case 10:throw e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,6]])}))),le.apply(this,arguments)}function ve(e){return pe.apply(this,arguments)}function pe(){return pe=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=ee(Q.events,t),e.next=4,te(n);case 4:return r=e.sent,a=r.map((function(e){return e.isNewEvent=!1,new D(e)})),e.abrupt("return",W()(a,["eventDate"],["desc"]));case 9:return e.prev=9,e.t0=e["catch"](0),e.next=13,J(F.t("errors.errorDuringWorkWithLongTermStore"));case 13:throw e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,9]])}))),pe.apply(this,arguments)}function de(e,t){return fe.apply(this,arguments)}function fe(){return fe=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=ee(Q.events,t),e.next=4,se(r,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e["catch"](0),e.next=10,J(F.t("errors.errorDuringWorkWithLongTermStore"));case 10:throw e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,6]])}))),fe.apply(this,arguments)}function me(){return he.apply(this,arguments)}function he(){return he=Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(Object.values(Q).flatMap((function(e){return Object.values(y).map(function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=ee(e,n),a=Z[r],t.next=4,a.clear();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})));case 3:e.next=10;break;case 5:return e.prev=5,e.t0=e["catch"](0),e.next=9,J(F.t("errors.errorDuringWorkWithLongTermStore"));case 9:throw e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,5]])}))),he.apply(this,arguments)}var be=n("d501"),we=n.n(be);function ge(e){return ye.apply(this,arguments)}function ye(){return ye=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n,s,i,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},s=r["a"].store.get("auth/token"),e.next=4,we.a.send("VKWebAppCallAPIMethod",{method:t,params:Object(a["a"])({},n,{v:O.vkAPIVersion,access_token:s})});case 4:if(i=e.sent,!i.response){e.next=9;break}return e.abrupt("return",i.response);case 9:throw J(F.t("errors.errorDuringRequest")),i;case 11:case"end":return e.stop()}}),e)}))),ye.apply(this,arguments)}ge.initClient=Object(h["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,we.a.send("VKWebAppInit",{}),e.next=4,we.a.send("VKWebAppGetAuthToken",{app_id:O.appID,scope:O.requiredRights.join(",")});case 4:return t=e.sent,e.next=7,r["a"].store.set("auth/token",t.access_token);case 7:return e.next=9,we.a.send("VKWebAppGetUserInfo");case 9:return t=e.sent,e.next=12,r["a"].store.set("auth/userID",t.id);case 12:e.next=18;break;case 14:throw e.prev=14,e.t0=e["catch"](0),J(F.t("errors.errorDuringVKClientInitialization")),e.t0;case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));function xe(){return{events:{},pageNumber:0,pageSize:30,showOnlyNewEvents:!0}}var Oe=xe(),Ee={namespaced:!0,state:Oe,mutations:Object(a["a"])({},i["d"].mutations(Oe)),getters:{newEntityTypeEvents:function(e){return Object.values(y).reduce((function(t,n){var r=e.events[n]||[];return t[n]=r.filter((function(e){return e.isNewEvent})),t}),{})},entityTypesEventsNumber:function(e){return Object.values(y).reduce((function(t,n){var r=e.events[n]||[];return t[n]=r.length,t}),{})},entityTypesNewEventsNumber:function(e,t){return w()(t.newEntityTypeEvents,(function(e){return e.length}))},filteredEntityEvents:function(e,t,n){var r=x[n.activeView];return e.showOnlyNewEvents?t.newEntityTypeEvents[r]:e.events[r]},displayedEntityEvents:function(e,t){var n=t.filteredEntityEvents,r=e.pageNumber*e.pageSize+e.pageSize;return n.slice(0,r)},numberOfPages:function(e,t){return Math.ceil(t.filteredEntityEvents.length/e.pageSize)}},actions:{initEventsState:function(e){var t=e.dispatch;return Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(y).map((function(e){return t("setEntityTypeEvents",e)})));case 2:case"end":return e.stop()}}),e)})))()},setEntityTypeEvents:function(e,t){var n=e.dispatch;return Object(h["a"])(regeneratorRuntime.mark((function e(){var a,s,i,c,o,u,l,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n("getEntityCurrentState",t),ce(t)]);case 2:return a=e.sent,s=Object(m["a"])(a,2),i=s[0],c=s[1],o=$(t,i,c),u=Object.values(o).flat(),e.next=10,ve(t);case 10:return l=e.sent,v=[].concat(Object(f["a"])(u),Object(f["a"])(l)),r["a"].store.set("events/events@".concat(t),v),e.next=15,Promise.all([ue(t,i),de(t,u)]);case 15:case"end":return e.stop()}}),e)})))()},getEntityCurrentState:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t!==y.group){e.next=7;break}return e.next=3,ge("groups.get",{extended:1,fields:O.groupsFields.join(",")});case 3:return n=e.sent,e.abrupt("return",n.items);case 7:if(t!==y.user){e.next=12;break}return e.next=10,ge("friends.get",{fields:O.usersFields.join(",")});case 10:return r=e.sent,e.abrupt("return",r.items);case 12:case"end":return e.stop()}}),e)})))()}}};n("2b3d");function _e(){var e=new URL(window.location.href),t=e.searchParams.get("vk_platform");return"desktop_web"===t||null==t}function je(e,t){var n;switch(e){case y.group:if(n=t.screen_name,!n)switch(t.type){case"group":n="public".concat(n);break;case"page":n="club".concat(n);break;case"event":n="event".concat(n);break;default:return null}break;case y.user:n=t.domain||t.screen_name||"id".concat(t.id);break;default:return null}return"https://vk.com/".concat(n)}function Te(){return{isDesktop:_e(),currentTime:Date.now(),activeView:o.groups,showMessageText:!1,messageColor:null,messageText:""}}r["a"].use(s["a"]);var ke=Te(),Ve=new s["a"].Store({plugins:[c.plugin],modules:{auth:d,events:Ee},state:ke,mutations:Object(a["a"])({},i["d"].mutations(ke))}),De=n("f309");r["a"].use(De["a"]);var Ne=new De["a"]({icons:{iconfont:"mdi"}}),Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[e.ready?[n("main-menu"),n("content-view")]:e._e()],2)},Re=[],Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app-bar",{attrs:{color:"white",app:"",dense:"","elevate-on-scroll":""},scopedSlots:e._u([{key:e.tabsSlotName,fn:function(){return[n("v-tabs",{attrs:{grow:"","icons-and-text":"","show-arrows":""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("v-tab",[n("v-chip",{staticClass:"ma-1",attrs:{title:e.$t("events.numberOfNewEvents"),"x-small":""}},[e._v(" "+e._s(e.entityTypesNewEventsNumber[e.entityTypes.group])+" ")]),e._v(" "+e._s(e.$t(e.viewsKeys.groups+".title"))+" ")],1),n("v-tab",[n("v-chip",{staticClass:"ma-1",attrs:{title:e.$t("events.numberOfNewEvents"),"x-small":""}},[e._v(" "+e._s(e.entityTypesNewEventsNumber[e.entityTypes.user])+" ")]),e._v(" "+e._s(e.$t(e.viewsKeys.users+".title"))+" ")],1),n("v-tab",[n("v-icon",[e._v(" mdi-help-circle-outline ")])],1)],1)]},proxy:!0}],null,!0)},[e.isDesktop?e._e():n("v-toolbar-title",[e._v(" EventsWatcher ")])],1)},Ie=[],$e={name:"MainMenu",data:function(){return{entityTypes:y,viewsKeys:o}},computed:Object(a["a"])({},Object(i["c"])({isDesktop:"isDesktop"}),{},Object(i["e"])({activeView:"activeView"}),{},Object(i["c"])("events",{entityTypesNewEventsNumber:"entityTypesNewEventsNumber"}),{tabsSlotName:function(){return this.isDesktop?"default":"extension"},activeTab:{get:function(){switch(this.activeView){case o.groups:return 0;case o.users:return 1;case o.settings:return 2;default:return null}},set:function(e){var t;switch(e){case 0:t=o.groups;break;case 1:t=o.users;break;case 2:t=o.settings;break;default:t=null}this.activeView=t}}})},Me=$e,We=(n("d799"),n("2877")),Le=n("6544"),Pe=n.n(Le),Ae=n("40dc"),ze=n("cc20"),Ke=n("132d"),Fe=n("71a3"),qe=n("fe57"),Ue=n("2a7f"),Be=Object(We["a"])(Me,Se,Ie,!1,null,"65801fca",null),He=Be.exports;Pe()(Be,{VAppBar:Ae["a"],VChip:ze["a"],VIcon:Ke["a"],VTab:Fe["a"],VTabs:qe["a"],VToolbarTitle:Ue["a"]});var Je,Ge,Ye,Ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-content",[e.activeView===e.viewsKeys.groups||e.activeView===e.viewsKeys.users?n("events-list-view"):e.activeView===e.viewsKeys.settings?n("settings-view"):e._e(),n("v-snackbar",{attrs:{color:e.messageColor},model:{value:e.showMessageText,callback:function(t){e.showMessageText=t},expression:"showMessageText"}},[e._v(" "+e._s(e.messageText)+" "),n("v-btn",{attrs:{text:""},on:{click:function(t){e.showMessageText=!1}}},[n("v-icon",[e._v("mdi-close")])],1)],1)],1)},Qe=[],Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"events-list pa-0",attrs:{fluid:""}},[n("v-col",{staticClass:"pb-0"},[n("v-row",{staticClass:"mb-2 mx-0 flex-nowrap",attrs:{align:"center"}},[n("v-select",{staticClass:"flex-grow-0 mr-2",attrs:{items:e.showNewEventsOptions,dense:"",outlined:"","hide-details":""},model:{value:e.showOnlyNewEvents,callback:function(t){e.showOnlyNewEvents=t},expression:"showOnlyNewEvents"}}),n("v-spacer"),n("v-btn",{attrs:{title:e.$t("events.updateEvents"),depressed:""},on:{click:e.updateEvents}},[n("v-icon",[e._v(" mdi-reload ")])],1)],1),e._l(e.displayedEntityEvents,(function(e){return n("event-controller",{key:e.id,staticClass:"mb-3",attrs:{event:e}})})),e.displayedEntityEvents.length?e._e():n("v-row",{staticClass:"mx-0"},[n("v-sheet",{staticClass:"flex-grow-1 px-2 py-1",attrs:{color:"blue-grey lighten-5"}},[e._v(" "+e._s(e.$t("events.noEvents"))+" ")])],1)],2)],1)},et=[],tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"event-controller",class:{"is-add-event":e.event.eventType===e.eventTypes.add,"is-remove-event":e.event.eventType===e.eventTypes.remove,"is-change-event":e.event.eventType===e.eventTypes.change},attrs:{outlined:""}},[n("div",{staticClass:"d-flex align-center pr-2 py-1"},[n("div",{staticClass:"event-controller__icon pa-2 pr-3 mr-3 my-n1 d-flex align-center justify-center flex-grow-0 align-self-stretch",attrs:{title:e.$t("events."+e.event.eventType)}},[n("v-icon",{attrs:{color:"white"}},[e._v(" "+e._s(e.eventIcon)+" ")])],1),n("div",{staticClass:"d-flex flex-column flex-grow-1"},[n("div",{staticClass:"d-flex align-center"},[n("v-avatar",{staticClass:"mr-3",attrs:{color:"indigo lighten-5",size:"36"}},[n("v-img",{attrs:{src:e.event.entityData.photo_50}})],1),n("div",{staticClass:"event-controller__content d-flex flex-grow-1"},[n("div",{staticClass:"event-controller__title"},[n("a",{staticClass:"text-break font-weight-medium",attrs:{href:e.eventEntityURL,target:"_blank"}},[e._v(" "+e._s(e.eventEntityTitle)+" ")])]),n("div",{staticClass:"event-controller__date",attrs:{title:e.formattedDateTitle}},[e._v(" "+e._s(e.formattedDate)+" ")])])],1),e.event.eventType===e.eventTypes.change?n("entity-changes-table",{attrs:{event:e.event}}):e._e()],1)])])},nt=[],rt=(n("b0c0"),n("436a")),at=n("b166"),st=n("ad53"),it=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-simple-table",[n("thead",[n("tr",[n("th"),n("th",[e._v(" "+e._s(e.$t("events.oldValue"))+" ")]),n("th",[e._v(" "+e._s(e.$t("events.newValue"))+" ")])])]),n("tbody",e._l(e.event.eventData,(function(t,r){var a=t[0],s=t[1];return n("tr",{key:r},[n("td",[e._v(" "+e._s(e.formatProperty(r))+" ")]),n("td",{staticClass:"text-break"},[e._v(" "+e._s(e.formatValue(r,a))+" ")]),n("td",{staticClass:"text-break"},[e._v(" "+e._s(e.formatValue(r,s))+" ")])])})),0)])},ct=[],ot=n("2768"),ut=n.n(ot),lt={name:"EntityChangesTable",props:{event:{type:D,required:!0}},computed:Object(a["a"])({},Object(i["c"])({activeView:"activeView"}),{entityType:function(){return x[this.activeView]}}),methods:{formatProperty:function(e){var t="".concat(this.activeView,".fields.").concat(e);return this.$t(t)},formatValue:function(e,t){if(ut()(t))return t;if(this.entityType===y.group){if("is_closed"===e){var n="".concat(this.activeView,".fieldsMapping.").concat(e,".").concat(t);return this.$t(n)}if("trending"===e||"verified"===e){var r="entities.booleanFieldsMapping.".concat(t);return this.$t(r)}}else if(this.entityType===y.user){if("relation"===e||"deactivated"===e){var a="".concat(this.activeView,".fieldsMapping.").concat(e,".").concat(t);return this.$t(a)}if("trending"===e||"verified"===e){var s="entities.booleanFieldsMapping.".concat(t);return this.$t(s)}}return t}}},vt=lt,pt=(n("36e5"),n("1f4f")),dt=Object(We["a"])(vt,it,ct,!1,null,"17b9f06f",null),ft=dt.exports;Pe()(dt,{VSimpleTable:pt["a"]});var mt=(Ye={},Object(g["a"])(Ye,o.groups,(Je={},Object(g["a"])(Je,j.add,"mdi-account-multiple-plus"),Object(g["a"])(Je,j.remove,"mdi-account-multiple-remove"),Object(g["a"])(Je,j.change,"mdi-pencil"),Je)),Object(g["a"])(Ye,o.users,(Ge={},Object(g["a"])(Ge,j.add,"mdi-account-plus"),Object(g["a"])(Ge,j.remove,"mdi-account-remove"),Object(g["a"])(Ge,j.change,"mdi-account-edit"),Ge)),Ye),ht={name:"EventController",components:{EntityChangesTable:ft},props:{event:{type:D,required:!0}},data:function(){return{eventTypes:j}},computed:Object(a["a"])({},Object(i["c"])({currentTime:"currentTime",activeView:"activeView"}),{eventIcon:function(){return mt[this.activeView][this.event.eventType]},entityType:function(){return x[this.activeView]},eventEntityTitle:function(){switch(this.entityType){case y.group:return this.event.entityData.name;case y.user:return"".concat(this.event.entityData.first_name," ").concat(this.event.entityData.last_name);default:return null}},eventEntityURL:function(){return je(this.entityType,this.event.entityData)},formattedDate:function(){return Object(rt["a"])(new Date(this.event.eventDate),this.currentTime,{locale:st["a"]})},formattedDateTitle:function(){return Object(at["a"])(new Date(this.event.eventDate),O.eventDateTitleFormat,{locale:st["a"]})}})},bt=ht,wt=(n("2338"),n("8212")),gt=n("b0af"),yt=n("adda"),xt=Object(We["a"])(bt,tt,nt,!1,null,"224d9532",null),Ot=xt.exports;Pe()(xt,{VAvatar:wt["a"],VCard:gt["a"],VIcon:Ke["a"],VImg:yt["a"]});var Et={name:"EventsListView",components:{EventController:Ot},computed:Object(a["a"])({},Object(i["c"])({activeView:"activeView"}),{},Object(i["c"])("events",{entityTypesEventsNumber:"entityTypesEventsNumber",entityTypesNewEventsNumber:"entityTypesNewEventsNumber",displayedEntityEvents:"displayedEntityEvents",pageSize:"pageSize",numberOfPages:"numberOfPages"}),{},Object(i["e"])("events",{pageNumber:"pageNumber",showOnlyNewEvents:"showOnlyNewEvents"}),{entityType:function(){return x[this.activeView]},showNewEventsOptions:function(){return[{value:!0,text:"".concat(this.$t("events.showOnlyNewEvents")," (").concat(this.entityTypesNewEventsNumber[this.entityType],")")},{value:!1,text:"".concat(this.$t("events.showAllEvents")," (").concat(this.entityTypesEventsNumber[this.entityType],")")}]}}),created:function(){var e=this;window.addEventListener("scroll",this.addEvents),this.$once("hook:beforeDestroy",(function(){return window.removeEventListener("scroll",e.addEvents)}))},methods:Object(a["a"])({},Object(i["a"])("events",{setEntityTypeEvents:"setEntityTypeEvents"}),{addEvents:function(){Y(250)&&this.pageNumber<this.numberOfPages&&(this.pageNumber+=1)},updateEvents:function(){this.pageNumber=0,this.setEntityTypeEvents(x[this.activeView])}})},_t=Et,jt=(n("347e"),n("8336")),Tt=n("62ad"),kt=n("a523"),Vt=n("0fd9"),Dt=n("b974"),Nt=n("8dd9"),Ct=n("2fa4"),Rt=Object(We["a"])(_t,Xe,et,!1,null,"416b47ff",null),St=Rt.exports;Pe()(Rt,{VBtn:jt["a"],VCol:Tt["a"],VContainer:kt["a"],VIcon:Ke["a"],VRow:Vt["a"],VSelect:Dt["a"],VSheet:Nt["a"],VSpacer:Ct["a"]});var It=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("ul",[n("li",[e._v(" Цель приложения – отслеживать изменения в группах и у друзей пользователя. ")]),n("li",[e._v(" Если было замечено изменение, то генерируется соответствующее событие: добавление/удаление/изменение группы/друга. ")]),n("li",[e._v(" Отслеживаются только базовые изменения. ")]),n("li",[e._v(" Фиксация изменений производится путём сравнения текущего и предыдущего состояний. ")]),n("li",[e._v(" Приложение не производит фиксацию изменений автономно: необходимо время от времени его запускать. ")]),n("li",[e._v(" Изменения хранятся локально, а это означает, что отсутствует синхронизация между устройствами и браузерами. ")])]),n("div",{staticClass:"mt-3"},[n("v-btn",{attrs:{depressed:""},on:{click:e.resetStore}},[e._v(" "+e._s(e.$t("settings.resetStore"))+" ")])],1)])},$t=[],Mt={name:"SettingsView",methods:{resetStore:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,me();case 2:return t.next=4,B(e.$t("settings.messages.storeIsReset"));case 4:case"end":return t.stop()}}),t)})))()}}},Wt=Mt,Lt=Object(We["a"])(Wt,It,$t,!1,null,"2abd9dc2",null),Pt=Lt.exports;Pe()(Lt,{VBtn:jt["a"],VContainer:kt["a"]});var At={name:"ContentView",components:{EventsListView:St,SettingsView:Pt},data:function(){return{viewsKeys:o}},computed:Object(a["a"])({},Object(i["c"])({activeView:"activeView",messageText:"messageText",messageColor:"messageColor"}),{},Object(i["e"])({showMessageText:"showMessageText"}),{},Object(i["e"])("events",{pageNumber:"pageNumber"})),watch:{activeView:{handler:function(){this.pageNumber=0},immediate:!0}},created:function(){this.initEventsState()},methods:Object(a["a"])({},Object(i["a"])("events",{initEventsState:"initEventsState"}))},zt=At,Kt=n("a75b"),Ft=n("2db4"),qt=Object(We["a"])(zt,Ze,Qe,!1,null,"5e05182c",null),Ut=qt.exports;Pe()(qt,{VBtn:jt["a"],VContent:Kt["a"],VIcon:Ke["a"],VSnackbar:Ft["a"]});var Bt={name:"App",components:{MainMenu:He,ContentView:Ut},data:function(){return{ready:!1}},created:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.initApp();case 2:setInterval((function(){e.$store.set("currentTime",Date.now())}),3e5);case 3:case"end":return t.stop()}}),t)})))()},methods:{initApp:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ge.initClient();case 2:X(),e.ready=!0;case 4:case"end":return t.stop()}}),t)})))()}}},Ht=Bt,Jt=n("7496"),Gt=Object(We["a"])(Ht,Ce,Re,!1,null,null,null),Yt=Gt.exports;Pe()(Gt,{VApp:Jt["a"]});n("6861");r["a"].store=Ve,r["a"].config.productionTip=!1,new r["a"]({store:Ve,i18n:F,vuetify:Ne,render:function(e){return e(Yt)}}).$mount("#app")},6861:function(e,t,n){},7695:function(e,t,n){},7704:function(e){e.exports=JSON.parse('{"entities":{"booleanFieldsMapping":{"0":"Нет","1":"Да"}},"groups":{"title":"Группы","fields":{"name":"Название","screen_name":"Короткий адрес","is_closed":"Закрытое","status":"Статус","trending":"Огонёк","verified":"Верификация"},"fieldsMapping":{"is_closed":{"0":"открытое","1":"закрытое","2":"частное"}}},"users":{"title":"Друзья","fields":{"first_name":"Имя","last_name":"Фамилия","nickname":"Никнейм (отчество)","maiden_name":"Девичья фамилия","screen_name":"Короткое имя страницы","deactivated":"Статус страницы","relation":"Семейное положение","status":"Статус","trending":"Огонёк","verified":"Верификация"},"fieldsMapping":{"relation":{"0":"не указано","1":"не женат/не замужем","2":"есть друг/есть подруга","3":"помолвлен/помолвлена","4":"женат/замужем","5":"всё сложно","6":"в активном поиске","7":"влюблён/влюблена","8":"в гражданском браке"},"deactivated":{"deleted":"удалена","banned":"заблокирована"}}},"settings":{"title":"Настройки","resetStore":"Сбросить сохранённые данные","messages":{"storeIsReset":"Сохранённые данные успешно сброшены"}},"events":{"add":"Добавление","remove":"Удаление","change":"Изменение","oldValue":"Было","newValue":"Стало","showOnlyNewEvents":"Новые события","showAllEvents":"Все события","numberOfNewEvents":"Количество новых событий","updateEvents":"Обновить состояние","noEvents":"Отсутствуют события"},"errors":{"errorDuringVKClientInitialization":"Во время инициализации приложения произошла ошибка","errorDuringRequest":"Во время совершения запроса произошла ошибка","errorDuringWorkWithLongTermStore":"Во время работы с долговременным хранилищем произошла ошибка"}}')},c04c:function(e,t,n){},d799:function(e,t,n){"use strict";var r=n("3160"),a=n.n(r);a.a}});
//# sourceMappingURL=app.64cf9610.js.map